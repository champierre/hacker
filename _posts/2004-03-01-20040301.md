---
layout: post
title:  "2004/03/01 仮想翻訳という考え方"
---

<pre>
======================================================================

      ハッカーへの道 
      ～　僕がオープンソースプロジェクトから学んだこと ～

      2004/03/01 仮想翻訳という考え方

      http://popfile.sourceforge.jp/hacker/index.html 

======================================================================


■ 前号のあらすじ

Up という単語を例に挙げて、ソフトウェアのユーザーインターフェースを翻訳
することの難しさを説明した。始めから正しい翻訳を当てることは不可能、修
正しては試してみるというトライ & エラーを繰り返すことが必要だ。このため
ユーザーインターフェースは簡単に修正してはまた本体に戻せるというように
着脱が容易にできるようになっていることが望ましい。POPFile では翻訳者ば
かりでなくエンドユーザーまでもがインターフェースを自由に変更でき、カス
タマイズできるようになっている。


-----今週の目次-------------------------------------------------------

■ 翻訳し忘れを防ぐ
■ 仮想翻訳という考え方
■ ターゲットは世界
■ 次号予告
■ 編集後記

----------------------------------------------------------------------


■ 翻訳し忘れを防ぐ

ユーザーインターフェースの翻訳作業が簡単に効率よく進められるように、PO
PFile ではいくつかの工夫がされている。POPFile を英語ユーザーだけでなく、
他の言語のユーザーにも広く使えるようにという配慮の顕れだと思う。

前回、前々回に登場したユーザーインターフェースのファイルを思い出しても
らいたい。

= [1] プログラム本体 =

print show_text("HELLO")


= [2] 英語用ユーザーインターフェース =

HELLO=Hello World
BYE=Bye


= [3] 日本語用ユーザーインターフェース =

HELLO=こんにちは、世界
BYE=さようなら


ソフトウェアにはバグの修正や機能の追加でバージョンアップがつきもの。PO
PFile のようなオープンソースのソフトウェアではそれが特に頻繁に行われる。

例えば新しいウィンドウが追加された場合、当然インターフェースも追加され
る。上の例を使うと、新しいバージョンの英語用ユーザーインターフェースは
例えば以下のようになる。


= [2'] 新しい英語用ユーザーインターフェース =

HELLO=Hello World
BYE=Bye
NEW_WINDOW=This is new function


これに同期して、日本語用ユーザーインターフェースにも以下のように、追加
された部分の翻訳を新たに加える必要がある。


= [3'] 日本語用ユーザーインターフェース =

HELLO=こんにちは、世界
BYE=さようなら
NEW_WINDOW=これは新しい機能です


差分だけを新たに翻訳するという作業は上のような簡単な例であれば、大した
ことはないのだが、実際のソフトウェアでは、ユーザーインターフェースは数
百、大規模なものなら数千行以上にわたる。例えばもうすぐリリースされる P
OPFile 0.21.0 の場合は、約300行ある。

POPFile では、この差分を翻訳する作業を楽にするために check.pl というス
クリプト(小さなプログラム)を提供している。このツールは CVS という開発者
がアクセスする最新のソースファイルが置かれている場所(バージョン管理がお
こなわれている)から入手できる。

この check.pl を使うと、翻訳済みの旧ユーザーインターフェースのファイル
[3]と新しい英語用ユーザーインターフェースのファイル[2']とを比較して、ま
だ翻訳されていない部分、つまり翻訳者が新たに追加しなくてはいけない部分
を表示してくれる。また、最新のバージョンでは必要なくなった部分、つまり
昔のファイルにはあったのに新しいファイルでは取り除かれた部分についても
表示する。

新しく追加されたユーザーインターフェースが見落とされ翻訳されていないと、
その部分だけは英語で表示されてしまうのだが、check.pl は翻訳者のこうした
見落としを防ぐ助けになっている。

このようなちょっとした工夫で、翻訳されたソフトウェアのクオリティを維持
することができるのだ。


■ 仮想翻訳という考え方

「仮想翻訳」とは聞き慣れない言葉だが、これは Pseudo Localization という
考え方を無理やり翻訳してみた言葉だ。

携帯電話のスキン(取り外し可能なカバー)と本体の例に今一度登場を願う。ス
キンを取り替えることによって電話の見た目を好きなように変えることができ
るわけだが、取り替えをおこなってもユーザーに見える部分で変わらない部分
というのもある。それは、当然のことだが、本体に付属している部分、例えば
液晶ディスプレイやボタンだ。

これらの見た目が変わらないのは普通は当然のことなのだが、例えばディスプ
レイの外枠のデザインを変えたい、ボタンの見た目を変えたいというユーザー
の強い要望があるかもしれない。その場合、これを実現するには、ディスプレ
イの外枠とボタンは電話本体ではなくスキンに付属するように作らなければな
らない。

以上の話をソフトウェアにあてはめると、ユーザーに見えるほとんど全ての部
分は、プログラム本体ではなく、ユーザーインターフェースのファイルに属す
るように作らなければいけない。そうしないと、一部は、インターフェースを
取り替えても元のまま表示されてしまう、つまり日本語版のソフトウェアなの
に英語で表示されてしまう部分が残ってしまうのだ。

これを事前に防ぐためにおこなわれるのが Pseudo Localization、つまり仮想
翻訳という考え方だ。

本格的にユーザーインターフェースを他の言語に翻訳する前に、本来英語で表
示される部分を、仮に別のテキストに置き換えてみる、というのが仮想翻訳だ。

携帯電話で言うと、本格的なスキンを作る前に試験用のスキン、プロトタイプ
のスキンを作り、それを取り付けて電話をテストしようという考え方だ。

POPFile では、html_test_language というオプションがあり、これを有効にし
て起動すると、一種の仮想翻訳状態になる。ユーザーインターフェースには本来
のテキスト、つまり英語のメッセージに代わって、IDであるキーワードが表示さ
れる。


= [2] 英語用ユーザーインターフェース =

HELLO=Hello World
BYE=Bye


の例で言えば、本来、"Hello World" や "Bye" が表示される部分に、キーワー
ドである "HELLO" や "BYE" (メッセージ部分ではなく先頭の ID 部分であるこ
とに注意)が代わりに表示されるのだ。

本来はインターフェースのファイルにあって、切り替え可能でなければならな
いのに、間違えて本体プログラムの方に属してしまった部分も、仮想翻訳をお
こなったソフトウェアをテストしてみることで容易に発見できる。その部分は、
キーワードではなく普通に意味のあるテキストとして表示されてしまうからだ。

また、この html_test_language オプションはIDであるキーワードを表示する
ことによって、ID に対応するテキストが実際にソフトウェアのどの部分に表示
されるのかがわかるので、翻訳の助けにもなっている。

前回取り上げた "Up" を「上へ」と訳すか「起動中」と訳すがわからないとい
う例を使おう。


UP_WINDOW1=Up
UP_WINDOW2=Up


というユーザーインターフェースがあったとして、html_test_language オプショ
ンを有効にしてソフトウェアを動かしてみれば、通常は両方とも "Up" と表示
されるところを、一方は UP_WINDOW1 と表示され、もう一方は UP_WINDOW2 と
表示される。画面の外観からどちらが「上へ」でどちらが「起動中」かがわか
るのである。

check.pl や html_test_language についてさらに詳細が知りたければ、以下の
 POPFile のドキュメント(英語)を参照してもらいたい。

http://popfile.sourceforge.net/cgi-bin/wiki.pl?WorldDomination


■ ターゲットは世界

このような工夫は後から取ってつけたものではなく、始めから POPFile が英語
以外にも翻訳されることを想定して組み込まれているものだ。つまり始めから
ターゲットユーザーは世界中の人なのである。

たとえ最初は国内のユーザーだけが対象でも、いずれは国外のユーザーが使う
ことを想定してあらかじめ翻訳しやすいような作りにしておくというのは非常
に賢明な方法だ。なぜならあとからそのような作りに変更するのは大変だけれ
ども、最初にそのような作りにしておくのは少しの手間で可能だからだ。

アメリカでも人気ブランドであるソニー。デジカメの液晶部分に表示されるメ
ッセージは簡単に日本語以外、英語や中国語、スペイン語などに切り替わるよ
うにできている。日本国内にとどまらず世界中の人々をターゲットにしている
ような企業なら当然のことだ。

アメリカ発のソフトウェアは商用でないフリーウェア・オープンソースソフト
ウェアでさえも、ターゲットを世界中の人に想定して、翻訳(本来は Localiza
tion(地域化) と書くべきだがわかりやすいようにこう言ってしまおう)が容易
にできる作りになっているものが多い。

日本発のソフトウェアも日本国内にとどまらず、世界中の人が便利と思って使
ってくれるかもしれない。それを想定して、翻訳が容易にできる作りに始めか
らなっているものがもっとあっても良いと思う。


-----次号予告---------------------------------------------------------

次号ではソフトウェアの品質を維持するテストツールについて書きたいと思っ
ている。

■ 品質を維持するテストツール(仮題)


-----編集後記---------------------------------------------------------

昔勤めていた会社が秋葉原にあり、時おり外国からのビジターを電気街に案内
することがあった。彼らの目的は「デジカメ」の購入である。日本のメーカー
が90%以上のシェアを占める製品ゆえ、日本にいったらこの機会にデジカメを安
く購入というのが外国人の行動パターンだ。しかしながら、大抵の外国人は価
格をみて驚く。「日本のほうが高いじゃないか。」彼ら外国人勢は秋葉原の免
税ショップで買い物をする。当然海外対応の製品が陳列されているわけだが、
同製品と比較して2割程度高い。一方、日本人向けの店に行っても旅行者は免税
で購入できるが、取扱説明書が日本語ゆえ、勘に頼って操作するしかない。下
手すると英語表示があっても英語に表示を切り替えられないという間抜けな事
態すら想定される。日本人よもっと海外に目を向けよ。そこには巨大なマーケ
ットが潜んでいる。

(by TOM@jishihaの夢のサポーター１号)


2年前 World Cup が終わったあとに日本に遊びに帰ったとき、JR の駅の各所に
ハングル語の表示が追加されているのにちょっと驚いた記憶がある。結構なこ
とだと思った。

でも国際化とは、単に表示を翻訳するということだけではない。たとえ言葉が
わからなくても目的の情報が得られるような工夫をほどこすこともまた立派な
国際化だ。

ずっと前のエピソードになるが、新宿駅で路線図とにらめっこしていて途方に
暮れている外国人の方がいた。話を聞いてみると、目的の路線の乗り場を探し
ているのだが見つからないらしい。そこで気づいたのだが、路線図の色（丸の
内線は赤というように）と乗り場表示の色が一致していなかったのだ。何と紛
らわしい。これでは日本語が読めない限りわかるはずがない。

違うエピソードを紹介しよう。ソウルに出張に行ったときだ。その国の文字が
全く読めない人の気持ちを初めて知った。例えその国の言語がわからなくても、
アルファベットを使用している国である限り、駅名くらいは見当がつくものだ。
しかし韓国はハングル語、全く読めないのだ。けれどもソウルの地下鉄ではほ
とんど迷うことはない。なぜか？全ての駅に数字が割り当てられていてその数
字が必ず駅名とともに表示されている。たとえ駅名がわからなくても、自分が
何番の駅で降りなければならないということがわかっていれば大丈夫。なかな
か画期的なシステムと感じたものだ。

(by jishiha)


======================================================================
      ハッカーへの道 
      ～　僕がオープンソースプロジェクトから学んだこと ～
======================================================================

□ 発行: jishiha (mailto:jishiha@users.sourceforge.jp)
□ 編集: TOM (mailto:tomhigu@yahoo.co.jp)
□ Web サイト: http://popfile.sourceforge.jp/hacker/index.html
□ このメールマガジンは『まぐまぐ！』 http://www.mag2.com/ を利用して
   発行しています。配信中止はこちら http://www.mag2.com/m/0000120581.htm
□ ご意見・ご感想は mailto:jishiha@users.sourceforge.jp まで。

Copyright (C) 2003-2004 Junya Ishihara. All rights reserved.

----------------------------------------------------------------------
</pre>
