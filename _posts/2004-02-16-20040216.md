---
layout: post
title:  "2004/02/16 言語追加とはスキンの追加だ"
---

<pre>
======================================================================

      ハッカーへの道 
      ～　僕がオープンソースプロジェクトから学んだこと ～

      2004/02/16 言語追加とはスキンの追加だ

      http://popfile.sourceforge.jp/hacker/index.html 

======================================================================


■ 前号のあらすじ

POPFile に関わる以前に作った Flogman というソフトウェアはユーザー数が伸
びず失敗プロジェクトだった。理由の一つはインストール作業が面倒でわかり
にくいことだったと思う。

POPFile は NSIS というフリーで使えるインストーラーを使っている。フリー
ではあるが機能は豊富、軽量で使いやすい。

インストーラーがなくても、例えばプログラムの実行ファイルをできるだけ少
なくし、レジストリを使わないようにするなどして、インストールの作業自体
を非常に簡単にすることができる。


-----今週の目次-------------------------------------------------------

■ ユーザー数を簡単に倍増させる方法
■ 言語追加とはスキンの追加だ
■ 次号予告
■ 編集後記

----------------------------------------------------------------------


■ ユーザー数を簡単に倍増させる方法

ソフトウェアのユーザー数を簡単に倍増させる方法がある。他の言語に対応す
ることだ。

新たに一つ対応言語を追加すれば、その言語を話す人すべてが一応潜在ユーザ
ーとなる。

しかも方法さえ心得ていれば、対応言語を追加する手間は、一からソフトウェ
アを開発する手間に比べればずっと小さい。大げさに書けば、最初の開発に手
間が 100 かかったとすれば、言語を追加する手間は 1 くらいだろう。

その少ない手間で、例えばアメリカのソフトウェアを日本語化すれば、アメリ
カの人口の約半分の潜在ユーザーが増える。日本のソフトウェアを英語化すれ
ば、日本の人口の数倍あるいは数十倍はいる英語を話す人々が潜在ユーザーだ。
これほどおいしい話はない。

「方法さえ心得ていれば」と書いた。POPFile はこの点で、非常に良い見本で
ある。


■ 言語追加とはスキンの追加だ

対応言語を追加するとき、まずまっさきに必要なのがユーザーインターフェー
スの翻訳だろう。最低限、これだけは必要だ。

もっとも単純な方法は、ソフトウェアのコードを書き換えるという方法である。
例として、次のような "Hello World" という文字を表示するソフトウェアのコ
ードを考える。プログラミング言語は架空のものとするので、文法は気にしな
いでもらいたい。

print "Hello World"

このプログラムの日本語版を、コードを書き換えて作ったとすると、

print "こんにちは、世界"

のようになる。一見、簡単そうに見えるが、プログラムというのはこんな単純
なものではない。何千行、何万行という命令の中で翻訳すべき部分は、限られ
たごく少数の命令に過ぎず、これらをいちいち見つけ出して翻訳するのは大変
な作業である。

一般的には、次のように翻訳すべき部分だけを別の場所に移しておき、それを
翻訳するという方法が取られる。


= プログラム本体 =

print show_text("HELLO")


= 英語用翻訳ファイル =

HELLO=Hello World
BYE=Bye


= 日本語用翻訳ファイル =

HELLO=こんにちは、世界
BYE=さようなら

show_text("HELLO") というのは翻訳ファイルから HELLO というキーワードに
対応するテキストを取ってくるという命令とする。。翻訳ファイルには、HELL
O や BYE といったキーワードに続き、各国語に翻訳されたテキストが続く。

プログラムを英語モードで実行すれば、show_text という命令は英語用翻訳フ
ァイルからテキストを取得し、日本語モードならば、日本語用翻訳ファイルか
ら取得する。

これならば、切り替えが簡単だし、新たに言語を追加するには翻訳ファイルだ
けを追加すればよく、プログラム本体を修正するという危険なことをする必要
がない。

POPFile では、実際、例えば日本語用には Nihongo.msg という翻訳ファイルが
あり、ユーザーインターフェースに表示されるテキストは全てこのファイルに
収められている。

日本ではまだあるのか良く知らないのだが、外見を好みのデザインに変えるこ
とができる携帯電話を考えて欲しい。携帯本体がプログラム本体であり、間単
に取り替えることができるスキンと言われる外見部分は翻訳ファイルに相当す
る。

新しいデザインのスキンを追加するのが簡単なように、新しい言語の翻訳ファ
イルを追加するのは簡単だし、スキンを切り替えるのが簡単なように、言語を
切り替えるのは簡単だ。

ただし、携帯電話もプログラムもそのように設計されていればの話である。

(次号に続く)


-----次号予告---------------------------------------------------------

次号は今回の話の続きである。

■ POPFile に見られるローカライズに関する工夫


-----編集後記---------------------------------------------------------

スキンの話、おもちゃに喩えると、「バービーちゃん」といったところか。こ
の間ウォルマートで見つけた様々な種類のバービーちゃんを紹介しよう。カリ
フォルニア仕様のバービーちゃん＝日焼けした肌にビキニのタンクトップ＋短
パンジーンズ＋サーフボード、アジアン仕様のバービーちゃん＝着物＋白粉の
化粧＋髪飾り（日本を意識しているものとおもわれる）、インド仕様のバーー
ビーちゃん＝浅黒い肌＋インド衣装のサリー＋ビンディー（インドの女性がお
でこに貼るシール上のアクセサリー）。つまり中身はバービーちゃんでも、肌
の色、衣装/アクセサリー、持ち物によって仕様が異なるということだ。個人的
にはカリフォルニア仕様が好みである。

(by TOM@jishihaの夢のサポーター１号)


ちょっと趣向を変えて、ややテクニカルな話題にしてみたが、それでも誰にで
もわかるように書いてみた。この「誰にでもわかるように」というのがなかな
か難しい。うまくわかりやすく書けているといいのだが。

(by jishiha)


======================================================================
      ハッカーへの道 
      ～　僕がオープンソースプロジェクトから学んだこと ～
======================================================================

□ 発行: jishiha (mailto:jishiha@users.sourceforge.jp)
□ 編集: TOM (mailto:tomhigu@yahoo.co.jp)
□ Web サイト: http://popfile.sourceforge.jp/hacker/index.html
□ このメールマガジンは『まぐまぐ！』 http://www.mag2.com/ を利用して
   発行しています。配信中止はこちら http://www.mag2.com/m/0000120581.htm
□ ご意見・ご感想は mailto:jishiha@users.sourceforge.jp まで。

Copyright (C) 2003-2004 Junya Ishihara. All rights reserved.

----------------------------------------------------------------------
</pre>
